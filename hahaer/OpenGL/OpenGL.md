![[Pasted image 20250313003844.png]]åˆ›å»ºä¸€ä¸ªVBOæ—¶ï¼Œè¿˜æ²¡æœ‰åˆ†é…æ˜¾å­˜å‘¢ï¼Œåªæ˜¯åˆ›å»ºäº†ä¸ªæè¿°æ˜¾å­˜çš„å¯¹è±¡ï¼ˆå¥æŸ„ï¼‰
![[Pasted image 20250313003953.png]]![[Pasted image 20250313004519.png]]
![[Pasted image 20250313004847.png]]
![[Pasted image 20250313005717.png]]![[Pasted image 20250313010309.png]]æ³¨æ„ï¼šVAOæ˜¯æè¿°ä¿¡æ¯çš„ï¼Œå³å­˜å‚¨æ•°æ®æ ¼å¼çš„ï¼Œä¸æ˜¯å­˜å‚¨å…·ä½“çš„æ•°æ®çš„ï¼Œé‚£ä¸ªæ˜¯VBO
![[Pasted image 20250313010812.png]]
![[Pasted image 20250313011055.png]]![[Pasted image 20250313011449.png]]
![[Pasted image 20250313011700.png]]
ä¸‹é¢çœ‹ä¸‹äº¤å‰å­˜å‚¨çš„VAOå†™æ³•ï¼š
![[Pasted image 20250313012601.png]]
![[Pasted image 20250313012638.png]]
![[Pasted image 20250313013041.png]]![[Pasted image 20250313013503.png]]
![[Pasted image 20250313013711.png]]![[Pasted image 20250318010134.png]]
![[Pasted image 20250318010311.png]]
![[Pasted image 20250322175444.png]]
glUniform3f ä¸glUniform3fvçš„åŒºåˆ«
`glUniform3f` å’Œ `glUniform3fv` éƒ½ç”¨äºå‘ç€è‰²å™¨ä¸­çš„ `uniform vec3` å˜é‡ä¼ é€’æ•°æ®ï¼Œä½†å®ƒä»¬çš„ä½¿ç”¨æ–¹å¼æœ‰æ‰€ä¸åŒã€‚

---

### **1. `glUniform3f(location, v0, v1, v2)`**

- ä½œç”¨ï¼š**ä¼ é€’å•ä¸ª `vec3` å€¼**ã€‚
- å‚æ•°ï¼š
    - `location`ï¼šç€è‰²å™¨ä¸­ `uniform vec3` å˜é‡çš„ä½ç½®ã€‚
    - `v0, v1, v2`ï¼šåˆ†åˆ«æ˜¯ `vec3` çš„ `x, y, z` åˆ†é‡ã€‚
- é€‚ç”¨äºï¼šåªéœ€è¦æ›´æ–°ä¸€ä¸ª `vec3` å€¼æ—¶ã€‚

#### **ç¤ºä¾‹**

```cpp
glUniform3f(location, 1.0f, 0.5f, 0.2f);
```

ç›¸å½“äºåœ¨ GLSL ä¸­ï¼š

```glsl
uniform vec3 color;
void main() {
    vec3 myColor = color; // color = vec3(1.0, 0.5, 0.2)
}
```

---

### **2. `glUniform3fv(location, count, value)`**

- ä½œç”¨ï¼š**ä¼ é€’ä¸€ä¸ªæˆ–å¤šä¸ª `vec3` å€¼**ã€‚
- å‚æ•°ï¼š
    - `location`ï¼šç€è‰²å™¨ä¸­ `uniform vec3` å˜é‡çš„ä½ç½®ã€‚
    - `count`ï¼šè¦ä¼ é€’çš„ `vec3` çš„æ•°é‡ï¼ˆæ•°ç»„å¤§å°ï¼‰ã€‚
    - `value`ï¼šæŒ‡å‘å­˜å‚¨ `vec3` æ•°æ®çš„ **è¿ç»­ `float` æ•°ç»„** çš„æŒ‡é’ˆï¼ˆæ¯ä¸ª `vec3` ç”¨ 3 ä¸ª `float` è¡¨ç¤ºï¼‰ã€‚
- é€‚ç”¨äºï¼šéœ€è¦æ‰¹é‡æ›´æ–°å¤šä¸ª `vec3`ï¼Œæˆ–è€…ç›´æ¥ä¼ é€’æ•°ç»„æ•°æ®æ—¶ã€‚

#### **ç¤ºä¾‹**

å¦‚æœ GLSL ä¸­æœ‰ä¸€ä¸ª `vec3` æ•°ç»„ï¼š

```glsl
uniform vec3 colors[2];
```

å¯ä»¥è¿™æ ·ä¼ å€¼ï¼š

```cpp
float colorData[] = {1.0f, 0.5f, 0.2f, 0.3f, 0.6f, 0.9f};
glUniform3fv(location, 2, colorData);
```

ç›¸å½“äºï¼š

```glsl
colors[0] = vec3(1.0, 0.5, 0.2);
colors[1] = vec3(0.3, 0.6, 0.9);
```

---

### **åŒºåˆ«æ€»ç»“**

|å‡½æ•°|ä½œç”¨|é€‚ç”¨äº|ä¼ é€’çš„æ•°æ®å½¢å¼|
|---|---|---|---|
|`glUniform3f`|ä¼ é€’å•ä¸ª `vec3`|å•ä¸ª `vec3`|`x, y, z` åˆ†é‡|
|`glUniform3fv`|ä¼ é€’å¤šä¸ª `vec3`|æ•°ç»„ `vec3` æˆ–æ‰¹é‡æ›´æ–°|`float` æ•°ç»„ï¼Œæ¯ä¸ª `vec3` 3 ä¸ªå€¼|

å¦‚æœä½ åªæ˜¯ç»™ä¸€ä¸ª `uniform vec3` å˜é‡ä¼ å€¼ï¼Œç”¨ `glUniform3f`ï¼›  
å¦‚æœä½ è¦ä¸€æ¬¡æ€§æ›´æ–°å¤šä¸ª `vec3`ï¼Œç”¨ `glUniform3fv` æ›´é«˜æ•ˆã€‚
![[Pasted image 20250322223939.png]]
![[Pasted image 20250322224106.png]]
![[Pasted image 20250322224415.png]]
![[Pasted image 20250322224847.png]]
![[Pasted image 20250322225106.png]]
![[Pasted image 20250323011948.png]]
![[Pasted image 20250323012212.png]]
![[Pasted image 20250323012315.png]]
![[Pasted image 20250323012335.png]]
![[Pasted image 20250323012449.png]]
![[Pasted image 20250323012558.png]]
![[Pasted image 20250323012705.png]]

![[Pasted image 20250323013332.png]]
ä¹‹æ‰€ä»¥ç»™samplerèµ‹å€¼ï¼Œæ˜¯å› ä¸ºéœ€è¦æŠŠsampleræŒ‡å‘ä¸åŒçš„texture unitï¼Œè€Œæ¯ä¸€ä¸ªtexture unitå·²ç»åœ¨ç¨‹åºè¿è¡Œå‰bindå¥½äº†ä¸åŒçš„texture object
![[Pasted image 20250323165410.png]]![[Pasted image 20250418233927.png]]
![[Pasted image 20250418234020.png]]![[Pasted image 20250418234218.png]]
![[Pasted image 20250418234302.png]]![[Pasted image 20250418235910.png]]
![[Pasted image 20250419005325.png]]
![[Pasted image 20250419010301.png]]
![[Pasted image 20250419011309.png]]
### opengl ä¸­vs shaderï¼Œgl_positionéšç€æ—¶é—´ç¼©å°ï¼Œuvä¸å˜ï¼Œé—®æ˜¾ç¤ºå‡ºæ¥çš„ä¸‰è§’å½¢ä¼šæ€ä¹ˆå˜
åœ¨ OpenGL ä¸­ï¼Œ**é¡¶ç‚¹ç€è‰²å™¨ï¼ˆVertex Shaderï¼‰ä¸­ `gl_Position` ç¼©å°**ï¼Œè€Œ **ä¼ é€’ç»™ç‰‡æ®µç€è‰²å™¨çš„ `uv`ï¼ˆçº¹ç†åæ ‡ï¼‰ä¸å˜**ï¼Œè¿™ä¼šå¯¼è‡´ **ä¸‰è§’å½¢åœ¨å±å¹•ä¸Šå˜å°ï¼Œä½†çº¹ç†ä¿æŒåŸæ ·è´´å›¾**ï¼Œä»è€Œé€ æˆä»¥ä¸‹è§†è§‰æ•ˆæœï¼š

---

### ğŸ¬ åœºæ™¯è®¾å®šå›é¡¾ï¼š

- `gl_Position` æ˜¯ç”¨æ¥å†³å®šä¸‰è§’å½¢ **åœ¨å±å¹•ä¸Šçš„ä½ç½®å’Œå¤§å°ï¼ˆNDCç©ºé—´ï¼‰**ã€‚
    
- `uv` æ˜¯ç”¨æ¥å†³å®šçº¹ç†åå›¾å¦‚ä½•åœ¨è¡¨é¢ä¸Šæ˜ å°„ã€‚
    
- ä½ è®© `gl_Position` éšæ—¶é—´ç¼©å°ï¼ˆæ¯”å¦‚ä¹˜ä¸Šä¸€ä¸ª `scale = sin(time)`ï¼‰ï¼Œ**è¡¨ç¤ºä¸‰è§’å½¢åœ¨å±å¹•ä¸Šå˜å°**ã€‚
    
- `uv` ä¸å˜ï¼Œæ„å‘³ç€çº¹ç†åæ ‡æ²¡è¢«ç¼©æ”¾ã€‚
    

---

### ğŸ“Œ ç»“æœï¼šä¸‰è§’å½¢å˜å°ï¼Œä½†æ˜¾ç¤ºçš„çº¹ç†èŒƒå›´ä¸å˜ï¼

æ‰€ä»¥ä½ ä¼šçœ‹åˆ°ï¼š

- ä¸‰è§’å½¢éšç€æ—¶é—´ç¼©å°ã€‚
    
- ä½†çº¹ç†ä»ç„¶å®Œæ•´è´´åœ¨è¿™ä¸ªå˜å°çš„ä¸‰è§’å½¢ä¸Šï¼ˆåªæ˜¯å˜å¾—æ›´â€œå‹ç¼©â€äº†ï¼‰ã€‚
    
- æœ€ç»ˆä½ çœ‹åˆ°çš„æ•ˆæœæ˜¯ï¼š
    
    > **ä¸‰è§’å½¢å˜å°ï¼Œçº¹ç†è¢«â€œè£å‰ªâ€æ˜¾ç¤ºæ›´å°‘çš„ä¸€éƒ¨åˆ†**ã€‚
    

---

### ğŸ–¼ï¸ ä¸¾ä¸ªä¾‹å­ï¼š

æ¯”å¦‚ä½ åŸæ¥æ˜¯ä¸€ä¸ªå¤§ä¸‰è§’å½¢ï¼Œæ˜¾ç¤ºäº†çº¹ç†çš„ `[0,0]` åˆ° `[1,1]` å…¨å›¾ã€‚

ç°åœ¨ä¸‰è§’å½¢ç¼©å°ä¸ºåŸæ¥çš„ 50%ï¼Œä½† `uv` è¿˜æ˜¯ `[0,0]` åˆ° `[1,1]`ï¼Œé‚£ä¼šå‘ç”Ÿï¼š

- é¡¶ç‚¹ä½ç½®å˜å°ï¼Œä¸‰è§’å½¢åœ¨å±å¹•ä¸Šå°äº†ä¸€åœˆã€‚
    
- ä½†æ˜¯ç‰‡æ®µç€è‰²å™¨ä»ç„¶æ”¶åˆ° `[0,0]` ~ `[1,1]` èŒƒå›´çš„ `uv`ï¼Œæ„å‘³ç€è¿™å°å—åŒºåŸŸä»ç„¶å°è¯•æ˜¾ç¤ºæ•´ä¸ªçº¹ç†ã€‚
    
- æ‰€ä»¥çº¹ç†å˜å¾—â€œè¢«å‹ç¼©â€åœ°è´´åœ¨å°åŒºåŸŸä¸Šã€‚
    

---

### ğŸ§ª å¦‚æœä½ å¸Œæœ›çº¹ç†ä¸å˜å½¢æ€ä¹ˆåŠï¼Ÿ

ä½ éœ€è¦åŒæ—¶**ç¼©æ”¾ `gl_Position` å’Œ `uv`**ï¼Œæˆ–è€…è®© `uv` æ ¹æ®ç¼©æ”¾æ¥åç§»è£å‰ªã€‚

---

å¦‚æœä½ æ„¿æ„æä¾›ä½ çš„ shader ä»£ç ç‰‡æ®µï¼Œæˆ‘å¯ä»¥ç»™ä½ ç›´æ¥æ¨¡æ‹Ÿåˆ†æå®ƒå…·ä½“æ˜¾ç¤ºä»€ä¹ˆæ ·å­ï¼ä½ è¦çœ‹çœ‹å—ï¼Ÿ
### æ‰€ä»¥uvåæ ‡å†³å®šäº†çº¹ç†å¯¹è±¡çš„å“ªä¸ªéƒ¨åˆ†ä¼šå®Œå…¨è´´åˆåœ¨glpositionåŒºåŸŸä¸Šå—
å¯¹ï¼ä½ ç†è§£å¾—å¾ˆå¯¹ï¼Œ**`uv` åæ ‡å†³å®šäº†çº¹ç†å¯¹è±¡çš„å“ªä¸€éƒ¨åˆ†ä¼šè´´åˆåˆ° `gl_Position` æ‰€å®šä¹‰çš„å›¾å½¢åŒºåŸŸä¸Š**ï¼Œå®ƒä»¬ä¹‹é—´æ˜¯è¿™æ ·é…åˆçš„ï¼š

---

### ğŸ¯ æ€»ä½“ç†è§£ï¼š

- **`gl_Position`** å†³å®šäº†å›¾å½¢åœ¨å±å¹•ä¸Šçš„**ä½ç½®å’Œå½¢çŠ¶**ï¼ˆæ¯”å¦‚ä¸€ä¸ªä¸‰è§’å½¢åœ¨çª—å£çš„å“ªä¸€éƒ¨åˆ†ï¼‰ã€‚
    
- **`uv` åæ ‡**ï¼ˆæˆ– `texCoord`ï¼‰å†³å®šäº†çº¹ç†å›¾ç‰‡ä¸­çš„å“ªä¸€éƒ¨åˆ†è¢«æ˜ å°„åˆ°è¿™ä¸ªä¸‰è§’å½¢ä¸Šã€‚
    

---

### ğŸ–¼ï¸ æ‰“ä¸ªå½¢è±¡çš„æ¯”æ–¹ï¼š

æƒ³è±¡ä¸€ä¸‹ï¼š

- ä¸€ä¸ªå¤§æµ·æŠ¥ï¼ˆçº¹ç†ï¼‰ä¸Šçš„æŸä¸ªåŒºåŸŸï¼ˆæ¯”å¦‚ä¸­é—´ 10%ï¼‰è¢«è£ä¸‹æ¥ï¼ˆ`uv` å®šä¹‰ï¼‰ã€‚
    
- ç„¶åè´´åˆ°äº†ä½ çš„ä¸‰è§’å½¢ä¸Šï¼ˆ`gl_Position` å®šä¹‰çš„å±å¹•åŒºåŸŸï¼‰ã€‚
    

å¦‚æœä½ ä¸æ”¹å˜ `uv`ï¼ŒåªæŠŠä¸‰è§’å½¢å˜å°ï¼Œæµ·æŠ¥ä¸Šçš„è¿™ä¸€å—è£å‰ªåŒºåŸŸ**ä»ç„¶å®Œæ•´åœ°è´´åœ¨è¿™ä¸ªå˜å°çš„ä¸‰è§’å½¢ä¸Š**ï¼Œäºæ˜¯å°±â€œå‹ç¼©â€åœ°æ˜¾ç¤ºå‡ºæ¥äº†ã€‚

---

### ğŸ“Œ å…³é”®ç‚¹ï¼š

|å…ƒç´ |ä½œç”¨|
|---|---|
|`gl_Position`|å†³å®šä¸‰è§’å½¢åœ¨å±å¹•ä¸Šæœ‰å¤šå¤§ã€åœ¨å“ªé‡Œ|
|`uv`|å†³å®šçº¹ç†ä¸­å“ªä¸€éƒ¨åˆ†è´´åˆ°è¿™ä¸ªä¸‰è§’å½¢ä¸Š|
|`gl_FragColor = texture(sampler, uv)`|ç‰‡æ®µç€è‰²å™¨æ ¹æ® `uv` é‡‡æ ·çº¹ç†è´´å›¾|

---

### âœ… ä¸¾ä¸ªæœ€å¸¸è§çš„ä¸‰è§’å½¢ä¾‹å­ï¼š

å‡è®¾ä½ ä¼ å…¥çš„ä¸‰ä¸ªé¡¶ç‚¹æ˜¯ï¼š

```glsl
// é¡¶ç‚¹ç€è‰²å™¨è¾“å‡º
v_uv = vec2(0.0, 0.0); // å·¦ä¸‹
v_uv = vec2(1.0, 0.0); // å³ä¸‹
v_uv = vec2(0.5, 1.0); // é¡¶éƒ¨
```

é‚£ä¹ˆè¿™ä¸‰ä¸ªç‚¹ï¼Œå°±æŠŠæ•´ä¸ªçº¹ç†çš„åº•éƒ¨å’Œä¸­éƒ¨â€œè´´â€åˆ°ä¸‰è§’å½¢ä¸Šäº†ã€‚

å¦‚æœä¸‰è§’å½¢æœ¬èº«å˜å°ï¼Œä½†è¿™ä¸‰ä¸ª `uv` è¿˜æ˜¯ä¸å˜ï¼Œé‚£å°±æ„å‘³ç€è¿™å¼ çº¹ç†å›¾ä¼šåœ¨æ›´å°çš„åŒºåŸŸä¸Šæ˜¾ç¤ºï¼ˆä¹Ÿè®¸ä¼šçœ‹å¾—æ¨¡ç³Šã€å‹ç¼©æˆ–å±€éƒ¨å¤±çœŸï¼‰ã€‚

---

æƒ³æ›´è¿›ä¸€æ­¥ç†è§£çš„è¯ï¼Œæˆ‘å¯ä»¥ç”»ä¸ªå›¾å½¢æˆ–ç¤ºæ„å›¾è§£é‡Šå®ƒä»¬çš„å¯¹åº”å…³ç³»ï¼ä½ éœ€è¦å¯è§†åŒ–å›¾å—ï¼Ÿ
![[Pasted image 20250419172421.png]]

 ![[Pasted image 20250419175533.png]]
 ![[Pasted image 20250419175614.png]]
åœ¨3ç»´æƒ…å†µä¸‹ ![[Pasted image 20250419175940.png]]![[Pasted image 20250419180204.png]]
### gl_positionæ˜¯å‡ ç»´çš„
`gl_Position` æ˜¯ **å››ç»´çš„å‘é‡**ï¼Œç±»å‹ä¸ºï¼š

```glsl
vec4 gl_Position;
```

---

### âœ… å››ä¸ªåˆ†é‡çš„å«ä¹‰ï¼ˆæ ‡å‡† NDC ç®¡çº¿ä¸­çš„ï¼‰

```glsl
gl_Position = vec4(x, y, z, w);
```

|åˆ†é‡|å«ä¹‰|
|---|---|
|`x`, `y`, `z`|é¡¶ç‚¹çš„ç©ºé—´ä½ç½®ï¼ˆè£å‰ªç©ºé—´åæ ‡ï¼‰|
|`w`|é½æ¬¡åæ ‡çš„ç¼©æ”¾å› å­ï¼ˆç”¨äºé€è§†é™¤æ³•ï¼‰|

---

### ğŸ” ä¸ºä»€ä¹ˆæ˜¯ 4Dï¼Ÿ

å› ä¸º OpenGL çš„å›¾å½¢æµæ°´çº¿ä½¿ç”¨ **é½æ¬¡åæ ‡ï¼ˆHomogeneous Coordinatesï¼‰**ï¼Œä»¥ä¾¿ç»Ÿä¸€å¤„ç†é€è§†æŠ•å½±ã€å¹³ç§»ç­‰ä»¿å°„å˜æ¢ã€‚

- æœ€ç»ˆåœ¨ç»è¿‡ **è£å‰ªç©ºé—´ -> å½’ä¸€åŒ–è®¾å¤‡åæ ‡(NDC)** çš„è½¬æ¢æ—¶ï¼Œä¼šåšä¸€æ¬¡ï¼š
    
    ```glsl
    ndc = vec3(x/w, y/w, z/w);
    ```
    
- ç„¶å NDC ä¼šè¢«æ˜ å°„åˆ°å±å¹•åæ ‡ä¸Šã€‚
    

---

### ğŸ¯ ä¸¾ä¸ªç®€å•ä¾‹å­ï¼š

```glsl
// é¡¶ç‚¹ä½ç½®åœ¨æ­£ä¸­å¤®
gl_Position = vec4(0.0, 0.0, 0.0, 1.0);
// æœ€ç»ˆå±å¹•ä½ç½®ï¼š0/1, 0/1, 0/1 => ä¸­å¤®
```

å¦‚æœä½ å†™æˆï¼š

```glsl
gl_Position = vec4(0.0, 0.0, 0.0, 2.0);
// å±å¹•ä½ç½®å˜æˆäº† 0/2, 0/2, 0/2 => è¿˜æ˜¯ä¸­å¤®ï¼Œä½† w = 2ï¼Œå½±å“äº†é€è§†æ·±åº¦
```

---

æ‰€ä»¥ç»“è®ºæ˜¯ï¼š

> âœ… `gl_Position` æ˜¯ 4 ç»´ï¼ˆvec4ï¼‰ï¼Œä¸ºäº†æ”¯æŒ **é€è§†æŠ•å½±** å’Œ **è£å‰ªåˆ¤æ–­**ï¼Œä¸æ˜¯æˆ‘ä»¬ç›´æ¥çœ‹åˆ°çš„ 3D åæ ‡ã€‚

å¦‚æœä½ è¿˜æƒ³çœ‹çœ‹ä»æ¨¡å‹åæ ‡åˆ° gl_Position çš„æ•´ä¸ªå˜æ¢é“¾è·¯ï¼ˆMVP å˜æ¢ï¼šModel â†’ View â†’ Projectionï¼‰ï¼Œæˆ‘ä¹Ÿå¯ä»¥æ€»ç»“ä¸€ä¸‹~

![[Pasted image 20250419221712.png]]
![[Pasted image 20250419222033.png]]
![[Pasted image 20250419222213.png]]![[Pasted image 20250419222344.png]]![[Pasted image 20250419222427.png]]![[Pasted image 20250419233303.png]]
![[Pasted image 20250419233840.png]]
![[Pasted image 20250419233849.png]]
viewMatrixï¼šå°†ä¸–ç•Œåæ ‡ç³»-ã€‹æ‘„åƒæœºåæ ‡ç³»
![[Pasted image 20250419234915.png]]
![[Pasted image 20250419234925.png]]
![[Pasted image 20250419234948.png]]![[Pasted image 20250419235519.png]]![[Pasted image 20250419235525.png]]![[Pasted image 20250419235531.png]]![[Pasted image 20250419235537.png]]![[Pasted image 20250419235544.png]]![[Pasted image 20250419235833.png]]
![[Pasted image 20250420000606.png]]
æ­¤å¤„ï¼Œç”±äºå½’ä¸€åŒ–æ—¶ï¼Œzæ–¹å‘é™¤ä»¥çš„æ˜¯far-nearï¼Œfarä¸º-2ï¼Œnearä¸º+2ï¼Œæ‰€ä»¥zåæ ‡æ•°å€¼å˜äº†ç›¸åæ•°ï¼ˆèµµæ–°æ”¿è¯´çš„ï¼‰
![[Pasted image 20250420001604.png]]
![[Pasted image 20250420001615.png]]
![[Pasted image 20250420003822.png]]![[Pasted image 20250420145354.png]]
![[Pasted image 20250420161823.png]]![[Pasted image 20250420162145.png]]
![[Pasted image 20250420163531.png]]
![[Pasted image 20250420164558.png]]
![[Pasted image 20250420164528.png]]